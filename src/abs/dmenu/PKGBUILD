pkgname=dmenu-xft
pkgver=4.0
pkgrel=1
pkgdesc="Dynamic X menu - with xft support"
arch=('i686' 'x86_64')
url="http://code.suckless.org/"
license=('MIT')
depends=('libx11' 'libxinerama' 'libxft')
conflicts=('dmenu')
provides=('dmenu=4.0')
source=(http://code.suckless.org/dl/tools/dmenu-$pkgver.tar.gz
        http://z.ip.fi/~henkka/dmenu-xft/dmenu-4.0-xft.diff
	xftcolor-fix.patch
	ctrl-c.patch
	tab-space.patch)

md5sums=('66e761a653930cc8a21614ba9fedf903'
         '1f3ecd819a39dea88a3dde9b5271bec6'
         '1c1648ea38f734591b4e31928bbe6ec1'
         'db2156be1137153b50b36ee3b08d41ab'
         '581adbb9af99b770b2c196c3cde25deb')

build() {
	cd $srcdir/dmenu-$pkgver
	patch -p1 < ../tab-space.patch || return 1
	patch -p1 < ../ctrl-c.patch || return 1
	patch -p1 < ../dmenu-4.0-xft.diff || return 1
	patch -p1 < ../xftcolor-fix.patch || return 1
	make || return 1
	make DESTDIR=$startdir/pkg PREFIX=/usr install || return 1
    # LICENSE
	mkdir -p $startdir/pkg/usr/share/licenses/$pkgname || return 1
	cp LICENSE $startdir/pkg/usr/share/licenses/$pkgname/ || return 1
}
